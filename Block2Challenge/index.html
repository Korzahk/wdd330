<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WDD-330-03 Block 2 Challenge: Online Aural Intonation Training</title>
  </head>
  <body>
    <h1><a href="../index.html">WDD 330 Portfolio</a></h1>
    <h2>Block 2 Challenge: Free Online Aural Intonation Training</h2>
    <p class="description">
        This is a free resource to develop your aural sense of intonation precision.<br> 
        Deep piano notes were used to make it pleasing to the ears for sustained practice.<br>
        Min represents how close the second note will be from the reference pitch in cents.<br>
        Max represents how far away the second note will be from the reference pitch in cents.<br>
        After pressing play, select if you think the second pitch you hear is sharp or flat.
    </p>
    <label for="min">min:</label>
    <select id="min" name="min">
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
      <option value="10" selected>10</option>
      <option value="15">15</option>
      <option value="20">20</option>
      <option value="25">25</option>
    </select>
    <label for="max">max:</label>
    <select id="max" name="max">
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
      <option value="10">10</option>
      <option value="15">15</option>
      <option value="20">20</option>
      <option value="25" selected>25</option>
    </select>
    <button type="button" id="play" onclick="play()">play exercise</button> 
    <br><br>
    <button type="button" id="sharp" onclick="isSharp()">sharp</button> 
    <br>
    <button type="button" id="flat" onclick="isFlat()">flat</button> 
    <br>
    <p id="feedback"></p>

    <script>
      let globalSign = 'u';
      let myFeedback = document.getElementById('feedback');

      function getRandomInt(max) {
        return Math.floor(Math.random() * max);
      }

      function getSign() {
        let sign = getRandomInt(2);
        if (sign) {
          globalSign = 'p';
          return 'p';
        }
        else {
          globalSign = 'n';
          return 'n';
        }
      }

      function getMagnitude(myMin, myMax) {
        let myRange = (myMax - myMin + 1);
        let magnitude = getRandomInt(myRange) + Number(myMin);
        return magnitude.toString();
      }

      function play() {
        let sign = getSign();
        let myMin = document.getElementById('min').value;
        let myMax = document.getElementById('max').value;
        let magnitude = getMagnitude(myMin, myMax);
        let myStr = 'audio/' + sign + magnitude + '.mp3';
        console.log(myStr);
        myAudio = new Audio(myStr);
        myAudio.play();
        myFeedback.textContent = '';
      }

      function isSharp() {
        if (globalSign == 'p') myFeedback.textContent = 'Correct!!!';
        else if (globalSign == 'n') myFeedback.textContent = 'incorrect :(';
      }

      function isFlat() {
        if (globalSign == 'n') myFeedback.textContent = 'Correct!!!';
        else if (globalSign == 'p') myFeedback.textContent = 'incorrect :(';
      }
      
    </script>
  </body>
</html>